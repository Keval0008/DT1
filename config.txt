matching = []
not_matching = []

# Convert listB to a set for fast lookups (optional but good for large lists)
setB = set(listB)

for item in listA:
    # Find the first underscore
    idx = item.find("_")
    
    # If no underscore, it's automatically not matching
    if idx == -1:
        not_matching.append(item)
        continue

    # Extract the filename portion in listA
    filename = item[:idx]

    # Check if it exists in listB
    if filename in setB:
        matching.append(item)
    else:
        not_matching.append(item)
